!function(a){"use strict";function b(a){this.file=a,this.url=a.replace(/\-/g,"/").replace(/_/g,".").slice(9),this.chapters=[],this.chapterOpen=0,this.meta={};var b=this;d(this.url).then(function(a){var c=Object.keys(a);c.forEach(function(c){c.indexOf("Chapter")?b.meta[c]=a[c]:b.chapters.push(a[c])})}).catch(function(a){e("Something when wrong.",url,a)}).then(function(){$(".ui.piled.segment:not(.hide)").addClass("hide"),b.show(),$(".loading").addClass("hide")})}function c(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onload=function(){200===d.status?b(d.response):c(Error(d.statusText))},d.onerror=function(){c(Error("Network Error"))},d.send()})}function d(a){return c(a).then(JSON.parse).catch(function(b){e("Could not get the file you wanted.",a,b)})}function e(a,b,c){var d='<div class="ui error message"><i class="close icon"></i> <div class="header">Bummer there was an error that said: '+a+" with a code of "+c+" for "+b+"</div> </div>";h.before(d)}var f=$(".ui.black.launch.right.button"),g=$(".ui.sidebar"),h=$(".segment.book"),i=null;f.click(function(){g.sidebar("toggle")}),g.on("click",".item",function(){var a=$(this).attr("data-book"),b=$(".ui.piled.segment:not(.hide)");$("#features").hide(),h.addClass("hide"),b.addClass("hide"),$("#abstract-"+a).removeClass("hide"),g.sidebar("toggle")}).on("click",".search",function(a){a.stopPropagation()}),$(".read").on("click",function(){h.removeClass("hide"),i=new b($(this).parents(".piled").attr("id"))}),h.on("click",".previous",function(){i.getPreviousChapter()}).on("click",".next",function(){i.getNextChapter()}),$(".message .close").on("click",function(){$(this).closest(".message").fadeOut()});{var j={valueNames:["header","author"],searchClass:"search"};new List("books",j)}b.prototype.file="",b.prototype.url="",a.Book=b,b.prototype.show=function(){var a='<div class="column"><article><div class="header">'+i.meta.Title+'</div><div class="chapter">'+i.chapters[i.chapterOpen]+'</div></article><div class="ui left labeled icon button floated previous"><i class="left arrow icon"></i>Previous Chapter</div><div class="ui right labeled icon button floated next"><i class="right arrow icon"></i>Next Chapter</div></div>';h.html(a),h.removeClass("hide")},b.prototype.getFirstChapter=function(){$(".chapter").text(i.chapters[0])},b.prototype.getNextChapter=function(){var a=i.chapterOpen<i.chapters.length?i.chapterOpen+=1:i.chapterOpen,b=i.chapters[a];$(".chapter").text(b)},b.prototype.getPreviousChapter=function(){var a=i.chapterOpen>0?i.chapterOpen-=1:0,b=i.chapters[a];$(".chapter").text(b)},b.prototype.getLastChapter=function(){$(".chapter").text(i.chapters[i.chapters.length-1])}}(this);